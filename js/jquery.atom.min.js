(function(a){function c(e){var b=e||window.event,c=[].slice.call(arguments,1),d=0,l=0,k=0;return e=a.event.fix(b),e.type="mousewheel",b.wheelDelta&&(d=b.wheelDelta/120),b.detail&&(d=-b.detail/3),k=d,void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(k=0,l=-1*d),void 0!==b.wheelDeltaY&&(k=b.wheelDeltaY/120),void 0!==b.wheelDeltaX&&(l=-1*b.wheelDeltaX/120),c.unshift(e,d,l,k),(a.event.dispatch||a.event.handle).apply(this,c)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var d=b.length;d;)a.event.fixHooks[b[--d]]=
a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],c,!1);else this.onmousewheel=c},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],c,!1);else this.onmousewheel=null}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
(function(a){a.cookie=function(c,b,d){if(1<arguments.length&&(!/Object/.test(Object.prototype.toString.call(b))||null===b||void 0===b)){d=a.extend({},d);if(null===b||void 0===b)d.expires=-1;if("number"===typeof d.expires){var e=d.expires,h=d.expires=new Date;h.setDate(h.getDate()+e)}b=""+b;return document.cookie=[encodeURIComponent(c),"=",d.raw?b:encodeURIComponent(b),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":
""].join("")}for(var d=b||{},e=d.raw?function(a){return a}:decodeURIComponent,h=document.cookie.split("; "),j=0,f;f=h[j]&&h[j].split("=");j++)if(e(f[0])===c)return e(f[1]||"");return null}})(jQuery);jQuery.easing.jswing=jQuery.easing.swing;
jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,c,b,d,e){return jQuery.easing[jQuery.easing.def](a,c,b,d,e)},easeInQuad:function(a,c,b,d,e){return d*(c/=e)*c+b},easeOutQuad:function(a,c,b,d,e){return-d*(c/=e)*(c-2)+b},easeInOutQuad:function(a,c,b,d,e){return 1>(c/=e/2)?d/2*c*c+b:-d/2*(--c*(c-2)-1)+b},easeInCubic:function(a,c,b,d,e){return d*(c/=e)*c*c+b},easeOutCubic:function(a,c,b,d,e){return d*((c=c/e-1)*c*c+1)+b},easeInOutCubic:function(a,c,b,d,e){return 1>(c/=e/2)?d/2*c*c*c+b:
d/2*((c-=2)*c*c+2)+b},easeInQuart:function(a,c,b,d,e){return d*(c/=e)*c*c*c+b},easeOutQuart:function(a,c,b,d,e){return-d*((c=c/e-1)*c*c*c-1)+b},easeInOutQuart:function(a,c,b,d,e){return 1>(c/=e/2)?d/2*c*c*c*c+b:-d/2*((c-=2)*c*c*c-2)+b},easeInQuint:function(a,c,b,d,e){return d*(c/=e)*c*c*c*c+b},easeOutQuint:function(a,c,b,d,e){return d*((c=c/e-1)*c*c*c*c+1)+b},easeInOutQuint:function(a,c,b,d,e){return 1>(c/=e/2)?d/2*c*c*c*c*c+b:d/2*((c-=2)*c*c*c*c+2)+b},easeInSine:function(a,c,b,d,e){return-d*Math.cos(c/
e*(Math.PI/2))+d+b},easeOutSine:function(a,c,b,d,e){return d*Math.sin(c/e*(Math.PI/2))+b},easeInOutSine:function(a,c,b,d,e){return-d/2*(Math.cos(Math.PI*c/e)-1)+b},easeInExpo:function(a,c,b,d,e){return 0==c?b:d*Math.pow(2,10*(c/e-1))+b},easeOutExpo:function(a,c,b,d,e){return c==e?b+d:d*(-Math.pow(2,-10*c/e)+1)+b},easeInOutExpo:function(a,c,b,d,e){return 0==c?b:c==e?b+d:1>(c/=e/2)?d/2*Math.pow(2,10*(c-1))+b:d/2*(-Math.pow(2,-10*--c)+2)+b},easeInCirc:function(a,c,b,d,e){return-d*(Math.sqrt(1-(c/=e)*
c)-1)+b},easeOutCirc:function(a,c,b,d,e){return d*Math.sqrt(1-(c=c/e-1)*c)+b},easeInOutCirc:function(a,c,b,d,e){return 1>(c/=e/2)?-d/2*(Math.sqrt(1-c*c)-1)+b:d/2*(Math.sqrt(1-(c-=2)*c)+1)+b},easeInElastic:function(a,c,b,d,e){var a=1.70158,h=0,j=d;if(0==c)return b;if(1==(c/=e))return b+d;h||(h=0.3*e);j<Math.abs(d)?(j=d,a=h/4):a=h/(2*Math.PI)*Math.asin(d/j);return-(j*Math.pow(2,10*(c-=1))*Math.sin(2*(c*e-a)*Math.PI/h))+b},easeOutElastic:function(a,c,b,d,e){var a=1.70158,h=0,j=d;if(0==c)return b;if(1==
(c/=e))return b+d;h||(h=0.3*e);j<Math.abs(d)?(j=d,a=h/4):a=h/(2*Math.PI)*Math.asin(d/j);return j*Math.pow(2,-10*c)*Math.sin(2*(c*e-a)*Math.PI/h)+d+b},easeInOutElastic:function(a,c,b,d,e){var a=1.70158,h=0,j=d;if(0==c)return b;if(2==(c/=e/2))return b+d;h||(h=1.5*0.3*e);j<Math.abs(d)?(j=d,a=h/4):a=h/(2*Math.PI)*Math.asin(d/j);return 1>c?-0.5*j*Math.pow(2,10*(c-=1))*Math.sin(2*(c*e-a)*Math.PI/h)+b:0.5*j*Math.pow(2,-10*(c-=1))*Math.sin(2*(c*e-a)*Math.PI/h)+d+b},easeInBack:function(a,c,b,d,e,h){void 0==
h&&(h=1.70158);return d*(c/=e)*c*((h+1)*c-h)+b},easeOutBack:function(a,c,b,d,e,h){void 0==h&&(h=1.70158);return d*((c=c/e-1)*c*((h+1)*c+h)+1)+b},easeInOutBack:function(a,c,b,d,e,h){void 0==h&&(h=1.70158);return 1>(c/=e/2)?d/2*c*c*(((h*=1.525)+1)*c-h)+b:d/2*((c-=2)*c*(((h*=1.525)+1)*c+h)+2)+b},easeInBounce:function(a,c,b,d,e){return d-jQuery.easing.easeOutBounce(a,e-c,0,d,e)+b},easeOutBounce:function(a,c,b,d,e){return(c/=e)<1/2.75?7.5625*d*c*c+b:c<2/2.75?d*(7.5625*(c-=1.5/2.75)*c+0.75)+b:c<2.5/2.75?
d*(7.5625*(c-=2.25/2.75)*c+0.9375)+b:d*(7.5625*(c-=2.625/2.75)*c+0.984375)+b},easeInOutBounce:function(a,c,b,d,e){return c<e/2?0.5*jQuery.easing.easeInBounce(a,2*c,0,d,e)+b:0.5*jQuery.easing.easeOutBounce(a,2*c-e,0,d,e)+0.5*d+b}});
(function(a){a.fn.atom=function(c,b){var d={tabs:function(){return this.each(function(){var b=a(this),c=this.id;a(".section",b).css({position:"absolute",width:"100%"});a(".sections",b).css("height",a("#"+a(".navi li.active a",b).attr("href"),b).outerHeight(!0));a(".navi > li > a[href]",b).bind(b.data("event")||"click",function(d){d.preventDefault();if(a(".sections, .sections li",b).is(":animated")||a(this).parent("li").hasClass("active"))return!1;var f=a("#"+a(".navi li.active",b).removeClass("active").find("a").attr("href"),
b),l=a("#"+a(this).parent("li").addClass("active").find("a").attr("href"),b);a.cookie(c,l.attr("id"),{path:"/"});switch(b.data("fx")){case "height":a(".sections",b).animate({height:0},{duration:333,easing:"easeInBack",complete:function(){f.hide();l.show();a(this).animate({height:l.outerHeight(!0)},{duration:333,easing:"easeOutCirc"})}});break;case "fade":f.fadeOut(333);l.fadeIn(333);a(".sections",b).animate({height:l.outerHeight(!0)},{duration:300,specialEasing:{opacity:"easeOutQuad",height:"easeOutExpo"}});
break;default:f.hide(),l.show(),a(".sections",b).css("height",l.outerHeight(!0))}});a(".navi li a",b).each(function(){window.location.hash==this.href&&a(this).trigger(b.data("event")||"click")})})},bubble:function(){var b=a('<div class="tip"></div>').appendTo("body"),c="",d="";return this.mouseover(function(){var f=a(this).attr("title"),l=f.indexOf("|")+1,k=f.indexOf("|",l);c=f;d=f.substring(l,k);f=f.substr(k+1,f.length);b.html(f);d&&b.prepend("<p><strong>"+d+"</strong></p>");a(this).attr("title",
"");b.show()}).mousemove(function(a){b.css({top:a.pageY+22,left:a.pageX+10})}).mouseout(function(){b.hide();a(this).attr("title",c)}).click(function(){b.hide();a(this).attr("title",c)})},clearField:function(){b=a.extend({blurClass:"clearFieldBlurred",activeClass:"clearFieldActive",attribute:"data-default",value:""},b);return this.each(function(){var c=a(this),h=c.attr(b.attribute),d=!1;b.value=c.val();void 0==h?c.attr(b.attribute,c.val()).addClass(b.blurClass):b.value=h;if(c.is(":password")){var f=
a('<input type="text" />').attr("class",c.attr("class")).val(h).addClass("pass-label").hide();c.after(f);d=!0;f.focus(function(){f.hide();c.show().focus()})}c.focus(function(){c.val()==h&&!c.is(":password")&&c.val("").removeClass(b.blurClass).addClass(b.activeClass);"url"==c.attr("name")&&""==c.val()&&c.val("http://").removeClass(b.blurClass).addClass(b.activeClass)});c.blur(function(){""==c.val()||"url"==c.attr("name")&&"http://"==c.val()?c.is(":password")&&d?(c.hide(),f.show()):c.val(h).removeClass(b.activeClass).addClass(b.blurClass):
c.removeClass(b.blurClass).addClass(b.activeClass)});c.blur()})},clearFieldCheck:function(){return this.each(function(){var b=function(b){b=a(b);b.val()==(b.data("default")||"http://")&&b.val("");b.is(":password")&&(b.next(".pass-label").hide(),b.show())};a(this).is("form")?a(".clearField",this).each(function(){b(this)}):b(this)})},toggleVisibility:function(){return this.live("click",function(b){b.preventDefault();b=a("#"+a(this).data("target"));return a("body").hasClass("no-fx")?a(b).toggle(0):a.support.opacity?
a(b).animate({opacity:"toggle",height:"toggle"},333,"easeOutQuart"):a(b).animate({height:"toggle"},333,"easeOutQuart")})},webShots:function(){return this.each(function(b){var c=a(this).attr("title"),d="http://s.wordpress.com/mshots/v1/"+encodeURIComponent(this.href)+"?w=400",f=a('<div class="webshot" id="webshot-'+b+'"><img src="'+d+'" width="400" alt="'+c+'" /></div>').hide().appendTo(document.body);a("body").hasClass("no-fx");return a(this).mouseover(function(){f.show()}).mousemove(function(a){f.css({left:a.pageX+
15,top:a.pageY+15})}).mouseout(function(){f.hide()})})},goTopControl:function(){return this.each(function(){var b=a(this);a(window).scroll(function(){a.support.hrefNormalized||b.css({position:"absolute",top:a(window).scrollTop()+a(window).height()-50});500<=a(window).scrollTop()?b.fadeIn(200):b.fadeOut(200)});b.click(function(){a(a.browser.safari||a.browser.chrome?"body":"html,body").animate({scrollTop:0},"slow");return!1})})},imageSlider:function(){b=a.extend({width:!1,height:!1,squareSize:80,stripeWidth:80,
showPager:!0,showArrows:!0,autoplay:!0,transition:"random",delay:10},b);return this.each(function(){b.width=b.width||a(this).width();b.height=b.height||a(this).height();b.squareSize=Math.min(Math.max(b.squareSize,47),188);b.stripeWidth=Math.min(Math.max(b.stripeWidth,30),188);b.delay=1E3*parseInt(a(this).data("delay"),10)||1E3*b.delay;var c=a('<div class="loading"></div>').css({left:b.width/2-80,top:b.height/2-10}),d=a('<div class="i-controls"></div>'),j=a('<div class="next-slide"></div>'),f=a('<a href="" class="link"></a>').hide().appendTo(d),
l=a(this).prepend(j).append(d).prepend(c),k=[],m=0,o=0,s=a(".slide",l).length,y=0,i=null,u="undefined"!==typeof l.data("autoplay")?l.data("autoplay"):b.autoplay,q=!1,g=Math.ceil(b.height/b.squareSize),n=Math.ceil(b.width/b.squareSize),t=Math.ceil(b.width/b.stripeWidth),w={animationFade:function(a,b,c){j.css({backgroundImage:"url("+k[b].image+")",opacity:0}).animate({opacity:1},{duration:1333,complete:c,easing:"easeOutSine"})},animationSlideH:function(a,c,d,e){j.css({backgroundImage:"url("+k[c].image+
")",left:e?b.width:-b.width}).animate({left:0},{duration:999,complete:d,easing:"easeOutExpo"})},animationSlideV:function(a,c,d,e){j.css({backgroundImage:"url("+k[c].image+")",top:e?b.height:-b.height}).animate({top:0},{duration:999,complete:d,easing:"easeOutExpo"})},animationRandomTiles:function(b,c,d){for(var e=[],b=0;b<g*n-1;++b)e[b]=20*b;for(var h,f,b=e.length;b;h=parseInt(Math.random()*b),f=e[--b],e[b]=e[h],e[h]=f);a(".square",j).css({backgroundImage:"url("+k[c].image+")",opacity:0}).each(function(b){a(this).stop().delay(e[b]).animate({opacity:1},
{duration:999,easing:"easeOutQuad",complete:Math.max.apply(Math,e)!==e[b]||d})})},animationHorizontalTiles:function(b,c,d,e){var h=e?0:g*n-1;a(".square",j).css({backgroundImage:"url("+k[c].image+")",opacity:0}).each(function(b){a(this).stop().delay(30*(e?g*n-b:b)).animate({opacity:1},{duration:666,easing:"easeOutSine",complete:b!==h||d})})},animationDiagonalTiles:function(c,d,e,h){var f=0,i=h?0:g*n-1;a(".square",j).css({backgroundImage:"url("+k[h?d:c].image+")",opacity:h?0:1});h?p(-20,-20):j.css("background-image",
"url("+k[d].image+")");l.removeClass("no-overflow");for(c=0;c<g;c++)for(d=0;d<n;d++)a(".square-"+f,j).stop().delay(100*(h?g-c+n-d:d+c)).animate({opacity:h?1:0,left:h?d*b.squareSize:d*b.squareSize-20,top:h?c*b.squareSize:c*b.squareSize-20},{duration:333,complete:f!==i||e}),++f},animationSpiral:function(b,c,d,e){var b=[],h=Math.ceil(g/2),f,l,i,m=0;for(i=0;i<h;i++){for(f=l=i;f<n-i-1;f++)b[m++]=l*n+f;f=n-i-1;for(l=i;l<g-i-1;l++)b[m++]=l*n+f;l=g-i-1;for(f=n-i-1;f>i;f--)b[m++]=l*n+f;f=i;for(l=g-i-1;l>i;l--)b[m++]=
l*n+f}e&&b.reverse();for(var s=0;s<m;s++)a(".square-"+b[s],j).css({backgroundImage:"url("+k[c].image+")",opacity:0}).each(function(){a(this).stop().delay(30*s).animate({opacity:1},{duration:666,easing:"easeOutSine",complete:s!=m-1||d})})},animationRandomStripes:function(b,c,d){for(var b=[],e=0;e<t-1;++e)b[e]=60*e;for(var h,f,e=b.length;e;h=parseInt(Math.random()*e),f=b[--e],b[e]=b[h],b[h]=f);a(".stripe",j).css({backgroundImage:"url("+k[c].image+")",opacity:0,top:-40});for(e=0;e<t;e++)a(".stripe-"+
e,j).stop().delay(b[e]).animate({opacity:1,top:0},{duration:999,specialEasing:{opacity:"easeOutQuad",top:"easeOutElastic"},complete:Math.max.apply(Math,b)!==b[e]||d})},animationStripeWave:function(b,c,d,e){b=e?0:t-1;a(".stripe",j).css({backgroundImage:"url("+k[c].image+")",opacity:0,top:-30});l.removeClass("no-overflow");for(c=0;c<t;c++)a(".stripe-"+c,j).stop().delay(30*(e?t-c:c)).animate({opacity:1,top:0},{duration:999,specialEasing:{opacity:"easeOutSine",top:"easeOutElastic"},complete:c!==b||d})},
animationCurtain:function(c,d,e,h){c=h?0:t-1;a(".stripe",j).css({backgroundImage:"url("+k[d].image+")",opacity:0,height:0,top:-(b.height/2)});l.removeClass("no-overflow");for(d=0;d<t;d++)a(".stripe-"+d,j).stop().delay(70*(h?t-d:d)).animate({opacity:1,height:b.height,top:0},{duration:333,specialEasing:{opacity:"easeInSine",height:"easeOutQuad",top:"easeOutQuad"},complete:d!==c||e})},animationInterweave:function(c,d,e,h){c=h?0:t-1;a(".stripe",j).css({backgroundImage:"url("+k[d].image+")",opacity:0});
a(".stripe:even",j).css("top",-b.height);a(".stripe:odd",j).css("top",b.height);l.removeClass("no-overflow");for(d=0;d<t;d++)a(".stripe-"+d,j).stop().delay(50*(h?t-d:d)).animate({opacity:1,top:0},{duration:666,specialEasing:{opacity:"easeOutSine",top:"easeOutExpo"},complete:d!==c||e})}},B=function(){return j.is(":animated")||a("div",j).is(":animated")||a(".caption",d).is(":animated")},z=function(b,c){clearTimeout(i);o=m;m=b;l.css("background-image","url("+k[o].image+")");f.hide();a(".pager a",d).removeClass("current");
a(".pager a:eq("+m+")",d).addClass("current");r();("random"!=k[m].transition?w["animation"+k[m].transition]:w[function(){var a=0,b,c;for(c in w)Math.random()<1/++a&&(b=c);return b}()])(o,m,function(){l.removeClass("no-overflow").addClass("no-overflow").css("background-image","url("+k[m].image+")");a("div",j).add(j).css("background-image","");p(0,0);A();v(m);k[m].link&&f.attr("href",k[m].link).show().trigger("href_updated");u&&x()},c)},x=function(){i=setTimeout(function(){z("undefined"==typeof k[m+
1]?0:m+1)},k[m].delay)},v=function(c){c=0===a(".caption",d).length?a(k[c].caption).appendTo(d):a(".caption",d).replaceAll(a(k[c].caption));c.hasClass("push-left")?c.css("width",0.3*b.width).css({opacity:0,left:-(0.3*b.width)}).stop().show().animate({opacity:1,left:0},{duration:333,easing:"easeOutExpo"}):c.hasClass("push-right")?c.css("width",0.3*b.width).css({opacity:0,right:-(0.3*b.width)}).stop().show().animate({opacity:1,right:0},{duration:333,easing:"easeOutExpo"}):c.css({opacity:0,bottom:-c.outerHeight()}).stop().show().animate({opacity:1,
bottom:0},{duration:333,easing:"easeOutExpo"})},r=function(){var c=a(".caption",d);c.hasClass("push-left")?c.stop().animate({opacity:0,left:-(0.3*b.width)},{duration:333,easing:"easeOutExpo",complete:function(){c.remove()}}):c.hasClass("push-right")?c.stop().animate({right:-(0.3*b.width),opacity:0},{duration:333,easing:"easeOutExpo",complete:function(){c.remove()}}):c.stop().animate({opacity:0,bottom:-c.outerHeight()},{duration:333,easing:"easeOutExpo",complete:function(){c.remove()}})},p=function(c,
d){for(var e=0;e<g;e++)for(var h=0;h<n;h++)a(".square-"+(n*e+h),j).css({backgroundPosition:-h*b.squareSize+"px "+-e*b.squareSize+"px",backgroundRepeat:"no-repeat",position:"absolute",left:h*b.squareSize+c,top:e*b.squareSize+d,opacity:0,width:b.squareSize,height:b.squareSize})},A=function(){for(var c=0;c<t;c++)a(".stripe-"+c,j).css({backgroundPosition:-c*b.stripeWidth+"px 0",backgroundRepeat:"no-repeat",position:"absolute",left:c*b.stripeWidth,top:0,opacity:0,width:b.stripeWidth,height:b.height})};
a(".slide",l).each(function(){var o={delay:1E3*parseInt(a(this).data("delay"))||b.delay,transition:a(this).data("fx")||b.transition,link:a("img:first",this).parent("a").attr("href")||"",image:a("img:first",this).attr("src"),caption:a(".caption",this).clone().wrap("<div></div>").parent().html()};k.push(o);a("<img>",this).load(function(){++y;if(s===y){l.css("background-image","url("+k[0].image+")").addClass("no-overflow");k[0].link&&f.attr("href",k[0].link).show().trigger("href_updated");a(".slide",
l).remove();c.remove();if(l.data("controls")){var o=l.data("controls").replace(/ /g,"").split(",");b.showPager=!!~a.inArray("pager",o);b.showArrows=!!~a.inArray("arrows",o)}b.showArrows&&(a("<a>",{"class":"prev",css:{top:b.height/2-48,opacity:0},click:function(){if(!B()){var a=m-1;"undefined"==typeof k[a]&&(a=s-1);z(a,!0);return!1}}}).appendTo(d),a("<a>",{"class":"next",css:{top:b.height/2-48,opacity:0},click:function(){if(!B()){var a=m+1;"undefined"==typeof k[a]&&(a=0);z(a);return!1}}}).appendTo(d));
if(b.showPager){a("<div>",{"class":"pager",css:{opacity:0}}).appendTo(d);for(o=0;o<s;o++)a(".pager",d).append(a("<a"+(0==o?' class="current"':"")+">&nbsp;</a>"));a(".pager a",d).click(function(){if(a(this).index()==m||B())return false;clearInterval(i);z(a(this).index(),m>a(this).index());return false})}d.hover(function(){a(".pager, a.next, a.prev",d).stop().animate({opacity:1},333);clearInterval(i);if(u){q=true;u=false}},function(){a(".pager, a.next, a.prev",d).stop().animate({opacity:0},666);if(q){x();
u=true}});v(0);for(o=0;o<g*n;o++)j.append(a("<div />").addClass("square square-"+o));p(0,0);for(o=0;o<t;o++)j.append(a("<div />").addClass("stripe stripe-"+o));A();d.fadeIn(333);!(2>s)&&u&&x()}}).attr("src",o.image)})})},collapsibleMenu:function(){return this.each(function(){a("li.extends",this).addClass("collapsed");a("li.extends.active, li.extends.active-parent",this).removeClass("collapsed").addClass("expanded");var b=/event-([^\s]+)/.exec(a(this).attr("class"))[1];a('li.extends span.expand, li.extends a[href="#"]',
this).bind(b,function(b){b.stopImmediatePropagation();var b=a(this),c=b.nextAll("ul:first"),d=b.parent(),e=b.closest(".collapsible, .accordion"),b=function(b,h){a(b).animate({opacity:h,height:h,marginTop:h,marginBottom:h,paddingTop:h,paddingBottom:h},{duration:200,step:function(){e.parents("li.block .sections").height(e.height())},complete:function(){d.removeClass("expanded collapsed");c.is("ul:visible")?d.addClass("expanded"):d.addClass("collapsed")}})};if(e.hasClass("collapsible"))void 0===c[0]&&
(window.location.href=this.href),b(c,"toggle");else{context_menu=this.parentNode.parentNode;if(c.is("ul:visible"))return e.hasClass("collapsible")&&b(a("ul:visible",context_menu).first(),"hide"),!1;c.is("ul:visible")||(b(a("ul:visible",context_menu).first(),"hide"),b(c,"show"))}return!1})})},highlightText:function(a,b,c){a=RegExp("(<[^>]*>)|(\\b"+a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")+")",b?"ig":"g");if(0<this.length)return this.html(this.html().replace(a,function(a,b,d){return"<"==a.charAt(0)?
a:'<strong class="'+c+'">'+d+"</strong>"}))},showMoreControl:function(){return this.click(function(b){var c=a(this).closest(".block"),d=a(this),f=a(this).html();b.preventDefault();a.ajax({type:"GET",url:atom_config.blog_url,data:{instance:a(this).data("instance"),atom:a(this).data("cmd"),offset:parseInt(a(this).data("offset"))},dataType:"json",context:this,beforeSend:function(){a(this).addClass("loading").html("&nbsp;")},complete:function(){a(this).removeClass("loading").html(f)},success:function(b){""!=
b.output&&(a("body").hasClass("no-fx")?(a(b.output).appendTo(c.find("ul")),d.parents(".sections").height(c.height())):a(b.output).appendTo(c.find("ul")).hide().each(function(b){a(this).delay(333*b).animate({opacity:"show",height:"show",marginTop:"show",marginBottom:"show",paddingTop:"show",paddingBottom:"show"},{duration:333,step:function(){d.parents(".sections").height(c.height())}})}));d.data("offset",b.offset);b.more||d.hide()}})})},nudgeLinks:function(){return this.each(function(){var b=a(this).data("dir"),
c="margin"+b.charAt(0).toUpperCase()+b.slice(1),d=-parseInt(a(this).data("amt"));a("a",this).each(function(){var b=a(this),e=b.css(c),k={},m={};k[c]=d+parseInt(e);m[c]=e;b.hover(function(){b.stop().animate(k,166)},function(){b.stop().animate(m,166)})})})},commentControls:function(){return this.each(function(){var b=a(this);b.delegate(".comment-reply","click",function(c){c.preventDefault();var c=this.id,d=c.lastIndexOf("-"),c=c.substr(++d);b.find(".comment.new").hide();b.find("#comment_parent").attr("value",
c);b.find("#cancel-reply").show();b.find(".comment.new").appendTo("#comment-body-"+c).show(0,function(){b.find("#comment").each(function(){if(this.createTextRange){var b=this.createTextRange();b.collapse(!1);b.select()}a(this).focus()})})});b.delegate("#cancel-reply","click",function(c){c.preventDefault();b.find(".comment.new").hide();b.find("#comment_parent").attr("value","0");a(this).hide();b.find(".comment.new").appendTo(b.find("li.new")).show(0,function(){b.find("#comment").each(function(){if(this.createTextRange){var b=
this.createTextRange();b.collapse(!1);b.select()}a(this).focus()})})});b.delegate(".comment-quote","click",function(c){var d=b.find("#comment"),f=a(this).parents(".comment");c.preventDefault();d.atom("clearFieldCheck");jQuery.fn.appendVal=function(a){return this.each(function(){this.value+=a})};d.appendVal('<blockquote>\n<a href="'+a(".comment-id",f).attr("href")+'">\n<strong><em>'+a(".comment-author",f).html()+":</em></strong>\n</a>\n "+function(a,b){var c,d=0,e=0,a=a+"";c=b?(b+"").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,
"$1"):" \n\r\t\u000c\x0B\u00a0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";d=a.length;for(e=0;e<d;e++)if(-1===c.indexOf(a.charAt(e))){a=a.substring(e);break}d=a.length;for(e=d-1;0<=e;e--)if(-1===c.indexOf(a.charAt(e))){a=a.substring(0,e+1);break}return-1===c.indexOf(a.charAt(0))?a:""}(function(a,b){b=(((b||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return a.replace(/<\!--[\s\S]*?--\>|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,
function(a,c){return-1<b.indexOf("<"+c.toLowerCase()+">")?a:""})}(a(".comment-text",f).html(),"<em><strong><i><b><a><code>"))+"\n</blockquote>\n").trigger("blur").focus()});b.delegate("a.vote","click",function(b){b.preventDefault();a.ajax({url:atom_config.blog_url,type:"GET",context:this,data:{atom:"comment_karma",karma:a(this).data("vote")},success:function(b){var c=a(this).parent().find(".karma");c.html(b);0<parseInt(b)?(c.removeClass("negative"),c.addClass("positive")):0>parseInt(b)&&(c.removeClass("positive"),
c.addClass("negative"));a(this).parent().find("a").remove()}})});b.delegate("a.show","click",function(c){c.preventDefault();a.ajax({url:atom_config.blog_url,type:"GET",context:this,data:{atom:"get_comment",comment_id:a(this).data("comment")},success:function(c){c=a("<ul />").html(c).find(".comment-body").hide();c=c[0].outerHTML||c.clone().appendTo("<div>").parent().html();a(this).parents(".comment-head").after(c);a("body").hasClass("no-fx")?(a(this).parents("li").find(".comment-body").show(),a(this).parents(".sections").height(b.height()+
15)):a(this).parents("li").find(".comment-body").animate({opacity:"show",height:"show",marginTop:"show",marginBottom:"show",paddingTop:"show",paddingBottom:"show"},{duration:333,complete:function(){a(this).parents(".sections").height(b.height()+15)}});a(this).remove()}})})})},fancybox:function(){var b,c,d,f,l,k,m,o,s,y=0,i={},u=[],q=0,g={},n=[],t=null,w=new Image,B=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,z=0,x="",v,r,p=!1,A=a.extend(a("<div/>")[0],{prop:0}),E=function(){c.hide();w.onerror=w.onload=null;
t&&t.abort();b.empty()},F=function(){!1===i.onError(u,y,i)?(c.hide(),p=!1):(i.titleShow=!1,i.width="auto",i.height="auto",b.html('<p id="fb-error">The requested content cannot be loaded.<br />Please try again later.</p>'),M())},G=function(){var d=u[y],f,g,m,j;E();i=a.extend({padding:10,margin:40,opacity:!1,cyclic:!1,scrolling:"auto",width:560,height:340,centerOnScroll:!0,ajax:{},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:0.5,titleShow:!0,titleFormat:null,titleFromAlt:!1,
transitionIn:"elastic",transitionOut:"elastic",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"easeOutBack",easingOut:"easeInBack",showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},"undefined"==typeof a(d).data("atom.fancybox")?i:a(d).data("atom.fancybox"));j=i.onStart(u,y,i);if(!1===j)p=!1;else{"object"==typeof j&&(i=a.extend(i,j));m=
i.title||(d.nodeName?a(d).attr("title"):d.title)||"";d.nodeName&&!i.orig&&(i.orig=a(d).children("img:first").length?a(d).children("img:first"):a(d));""===m&&(i.orig&&i.titleFromAlt)&&(m=i.orig.attr("alt"));f=i.href||d.href||null;if(/^(?:javascript)/i.test(f)||"#"==f)f=null;f&&(g=f.match(B)?"image":"ajax");g?(i.href=f,i.title=m,i.padding=parseInt(i.padding,10),i.margin=parseInt(i.margin,10),b.css("padding",i.padding+i.margin),a(".fb-inline-tmp").unbind("fb-cancel").bind("fb-change",function(){a(this).replaceWith(k.children())}),
"ajax"!==g?(p=!1,c.show(),w=new Image,w.onerror=F,w.onload=function(){p=true;w.onerror=w.onload=null;i.width=w.width;i.height=w.height;a("<img />").attr({id:"fb-img",src:w.src,alt:i.title}).appendTo(b);N()},w.src=f):(p=!1,c.show(),i.ajax.win=i.ajax.success,t=a.ajax(a.extend({},i.ajax,{url:f,data:i.ajax.data||{},error:function(a){a.status>0&&F()},success:function(a,d,C){if((typeof C=="object"?C:t).status==200){if(typeof i.ajax.win=="function"){j=i.ajax.win(f,a,d,C);if(j===false){c.hide();return}if(typeof j==
"string"||typeof j=="object")a=j}b.html(a);M()}}})))):F()}},M=function(){var c=i.width,d=i.height,c=-1<c.toString().indexOf("%")?parseInt((a(window).width()-2*i.margin)*parseFloat(c)/100,10)+"px":"auto"==c?"auto":c+"px",d=-1<d.toString().indexOf("%")?parseInt((a(window).height()-2*i.margin)*parseFloat(d)/100,10)+"px":"auto"==d?"auto":d+"px";b.wrapInner('<div style="width:'+c+";height:"+d+";overflow: "+("auto"==i.scrolling?"auto":"yes"==i.scrolling?"scroll":"hidden")+';position:relative;"></div>');
i.width=b.width();i.height=b.height();N()},N=function(){var C,O;c.hide();if(f.is(":visible")&&!1===g.onCleanup(n,q,g))a.event.trigger("fb-cancel"),p=!1;else{p=!0;a(k.add(d)).unbind();a(window).unbind("resize.fb scroll.fb");a(document).unbind("keydown.fb");f.is(":visible")&&f.css("height",f.height());n=u;q=y;g=i;g.overlayShow?(d.css({opacity:g.overlayOpacity,cursor:g.hideOnOverlayClick?"pointer":"auto",height:a(document).height()}),d.is(":visible")||d.show()):d.hide();r=R();x=g.title||"";z=0;m.empty().removeAttr("style").removeClass();
if(!1!==g.titleShow&&(x=a.isFunction(g.titleFormat)?g.titleFormat(x,n,q,g):x&&x.length?x:!1)&&""!==x)m.html(x).appendTo("body").show(),m.css({width:r.width-2*g.padding,marginLeft:g.padding,marginRight:g.padding}),z=m.outerHeight(!0),m.appendTo(l),r.height+=z;m.hide();f.is(":visible")?(a(o.add(s)).hide(),C=f.position(),v={top:C.top,left:C.left,width:f.width(),height:f.height()},O=v.width==r.width&&v.height==r.height,k.fadeTo(g.changeFade,0.3,function(){var c=function(){k.html(b.contents()).fadeTo(g.changeFade,
1,H)};a.event.trigger("fb-change");k.empty().css({"border-width":g.padding,width:r.width-g.padding*2,height:i.type=="ajax"?"auto":r.height-z-g.padding*2});if(O)c();else{A.prop=0;a(A).animate({prop:1},{duration:g.changeSpeed,easing:g.easingChange,step:I,complete:c})}})):(f.removeAttr("style"),k.css("border-width",g.padding),"elastic"==g.transitionIn?(v=P(),k.html(b.contents()),f.show(),g.opacity&&(r.opacity=0),A.prop=0,a(A).animate({prop:1},{duration:g.speedIn,easing:g.easingIn,step:I,complete:H})):
(0<z&&m.show(),k.css({width:r.width-2*g.padding,height:"ajax"==i.type?"auto":r.height-z-2*g.padding}).html(b.contents()),f.css(r).fadeIn("none"==g.transitionIn?0:g.speedIn,H)))}},Q=function(){(g.enableEscapeButton||g.enableKeyboardNav)&&a(document).bind("keydown.fb",function(a){if(27==a.keyCode&&g.enableEscapeButton)a.preventDefault(),K();else if((37==a.keyCode||39==a.keyCode)&&g.enableKeyboardNav&&"INPUT"!==a.target.tagName&&"TEXTAREA"!==a.target.tagName&&"SELECT"!==a.target.tagName)a.preventDefault(),
37==a.keyCode?D(q-1):D(q+1)});if(g.showNavArrows){if(g.cyclic&&1<n.length||0!==q)a("a",o).css("top",f.height()/2-a("a",o).height()/2),o.show();if(g.cyclic&&1<n.length||q!=n.length-1)a("a",s).css("top",f.height()/2-a("a",o).height()/2),s.show()}else o.hide(),s.hide()},H=function(){"ajax"==i.type&&k.css("height","auto");f.css("height","auto");x&&x.length&&m.show();Q();g.hideOnContentClick&&k.bind("click",K);g.hideOnOverlayClick&&d.bind("click",K);a(window).bind("resize.fb",S);g.centerOnScroll&&a(window).bind("scroll.fb",
L);f.show();p=!1;L();g.onComplete(n,q,g);var b,c;n.length-1>q&&(b=n[q+1].href,"undefined"!==typeof b&&b.match(B)&&(c=new Image,c.src=b));0<q&&(b=n[q-1].href,"undefined"!==typeof b&&b.match(B)&&(c=new Image,c.src=b))},I=function(a){var b={width:parseInt(v.width+(r.width-v.width)*a,10),height:parseInt(v.height+(r.height-v.height)*a,10),top:parseInt(v.top+(r.top-v.top)*a,10),left:parseInt(v.left+(r.left-v.left)*a,10)};"undefined"!==typeof r.opacity&&(b.opacity=0.5>a?0.5:a);f.css(b);k.css({width:b.width-
2*g.padding,height:b.height-z*a-2*g.padding})},J=function(){return[a(window).width()-2*g.margin,a(window).height()-2*g.margin,a(document).scrollLeft()+g.margin,a(document).scrollTop()+g.margin]},R=function(){var a=J(),b={},c=2*g.padding,d;b.width=-1<g.width.toString().indexOf("%")?parseInt(a[0]*parseFloat(g.width)/100,10):g.width+c;b.height=-1<g.height.toString().indexOf("%")?parseInt(a[1]*parseFloat(g.height)/100,10):g.height+c;if(b.width>a[0]||b.height>a[1])if("image"==i.type){if(d=g.width/g.height,
b.width>a[0]&&(b.width=a[0],b.height=parseInt((b.width-c)/d+c,10)),b.height>a[1])b.height=a[1],b.width=parseInt((b.height-c)*d+c,10)}else b.width=Math.min(b.width,a[0]),b.height=Math.min(b.height,a[1]);b.top=parseInt(Math.max(a[3]-20,a[3]+0.5*(a[1]-b.height-40)),10);b.left=parseInt(Math.max(a[2]-20,a[2]+0.5*(a[0]-b.width-40)),10);return b},P=function(){var b=i.orig?a(i.orig):!1,c={};b&&b.length?(c=b.offset(),c.width=b.width(),c.height=b.height(),c={width:c.width+2*g.padding,height:c.height+2*g.padding,
top:c.top-g.padding-20,left:c.left-g.padding-20}):(b=J(),c={width:2*g.padding,height:2*g.padding,top:parseInt(b[3]+0.5*b[1],10),left:parseInt(b[2]+0.5*b[0],10)});return c},D=function(a){p||(a=parseInt(a),u=n,-1<a&&a<n.length?(y=a,G()):g.cyclic&&1<n.length&&(y=a>=n.length?0:n.length-1,G()))},K=function(){function b(){d.fadeOut("fast");m.empty().hide();f.hide();a.event.trigger("fb-cleanup");k.empty();g.onClosed(n,q,g);n=i=[];q=y=0;g=i={};p=!1}if(!p&&!f.is(":hidden"))if(p=!0,g&&!1===g.onCleanup(n,q,
g))p=!1;else if(E(),a(o.add(s)).hide(),a(k.add(d)).unbind(),a(window).unbind("resize.fb scroll.fb"),a(document).unbind("keydown.fb"),k.find("iframe").attr("src","about:blank"),f.stop(),"elastic"==g.transitionOut){v=P();var c=f.position();r={top:c.top,left:c.left,width:f.width(),height:f.height()};g.opacity&&(r.opacity=1);m.empty().hide();A.prop=1;a(A).animate({prop:0},{duration:g.speedOut,easing:g.easingOut,step:I,complete:b})}else f.fadeOut("none"==g.transitionOut?0:g.speedOut,b)},S=function(){d.is(":visible")&&
d.css("height",a(document).height());L(!0)},L=function(a){var b,c;if(!p&&(c=!0===a?1:0,b=J(),c||!(f.width()>b[0]||f.height()>b[1])))f.stop().animate({top:parseInt(Math.max(b[3]-20,b[3]+0.5*(b[1]-k.height()-40)-g.padding)),left:parseInt(Math.max(b[2]-20,b[2]+0.5*(b[0]-k.width()-40)-g.padding))},"number"==typeof a?a:200)};if(a("#fb-wrap").length||!a(this).length)return this;a("body").append(b=a('<div id="fb-tmp"></div>'),c=a('<div id="fb-loading"></div>'),d=a('<div id="fb-overlay"></div>'),f=a('<div id="fb-wrap"></div>'));
l=a('<div id="fb-outer"></div>').appendTo(f);l.append(k=a('<div id="fb-content"></div>'),m=a('<div id="fb-title"></div>'),o=a('<div id="fb-left"><a>&nbsp;</a></<div'),s=a('<div id="fb-right"><a>&nbsp;</a></<div'));c.click(function(){p||(p=!0,a.event.trigger("fb-cancel"),E(),i.onCancel(u,y,i),p=!1)});a("a",o).click(function(a){a.preventDefault();D(q-1)});a("a",s).click(function(a){a.preventDefault();D(q+1)});a.fn.mousewheel&&f.bind("mousewheel.fb",function(b,c){if(p)b.preventDefault();else if(0==a(b.target).get(0).clientHeight||
a(b.target).get(0).scrollHeight===a(b.target).get(0).clientHeight)b.preventDefault(),0<c?D(q-1):D(q+1)});return this.data("atom.fancybox",a.extend(i,a.metadata?a(this).metadata():{})).unbind("click.fb").bind("click.fb",function(b){b.preventDefault();p||(p=!0,a(this).blur(),u=[],y=0,b=a(this).data("group")||"",!b||""==b?u.push(this):(u=a('a[data-group="'+b+'"], area[data-group="'+b+'"]'),y=u.index(this)),G())})},superfish:function(){b=a.extend({hoverClass:"open",delay:500,dir:"marginTop",fx:!0,autoArrows:!0,
menuClass:"superfish",anchorClass:"has-submenus",arrowClass:"arrow"},b);var c=a(['<span class="',b.arrowClass,'">&nbsp;</span>'].join("")),d=function(){var b=f(a(this));clearTimeout(b.timer);k(this);l(a(this).siblings())},j=function(){var c=f(a(this)),d=a(this);clearTimeout(c.timer);c.timer=setTimeout(function(){l(d)},b.delay)},f=function(a){return a.parents(["ul.",b.menuClass,":first"].join(""))[0]},l=function(c){a(c).each(function(){var c=a("li."+b.hoverClass,this).add(this).removeClass(b.hoverClass).find(">ul");
if(b.fx){var d={};d[b.dir]=20;a.support.opacity&&(d.opacity=0);c.stop().animate(d,150,"swing",function(){a(this).css({display:"none"})})}else c.css({display:"none"})})},k=function(c){a(c).each(function(){if(b.fx){var c={},d={};c.display="block";c[b.dir]=20;d[b.dir]=0;a.support.opacity&&(c.opacity=0,d.opacity=1);a(this).addClass(b.hoverClass).find(">ul:hidden").css(c).stop().animate(d,150,"swing")}else a(this).addClass(b.hoverClass).find(">ul:hidden").css({display:"block"})})};return this.each(function(){a("body").hasClass("no-fx")&&
(b.fx=!1);if(b.fx&&(a(this).hasClass("slide-up")&&(b.dir="marginBottom"),a(this).hasClass("slide-left")&&(b.dir="marginLeft"),a(this).hasClass("slide-right")))b.dir="marginRight";var f=a("li:has(ul)",this).hover(d,j).each(function(){b.autoArrows&&a(">a:first-child",this).addClass(b.anchorClass).append(c.clone())});l(f);a("a",this).each(function(b){var c=a(this).eq(b).parents("li");a(this).eq(b).focus(function(){d.call(c)}).blur(function(){j.call(c)})})}).each(function(){a(this).addClass(b.menuClass)})}};
if(d[c])return d[c].apply(this,Array.prototype.slice.call(arguments,1))}})(jQuery);
jQuery(document).ready(function(a){var c=atom_config.options.split("|");a(document).bind("atom_ready",function(){-1!==a.inArray("effects",c)&&(a("body").removeClass("no-fx"),a(".nudge").atom("nudgeLinks"),a("a.go-top").atom("goTopControl"));a(".block a.more").atom("showMoreControl");a(".nav ul.menu, nav > ul").atom("superfish");a("a.screenshot").atom("webShots");a(".accordion, .collapsible").atom("collapsibleMenu");a(".toggle").atom("toggleVisibility");a("a.tt").atom("bubble");a("#comments").atom("commentControls");
a("input.email, input#email").bind("change",function(){a.ajax({url:atom_config.blog_url,type:"GET",context:this,data:{atom:"get_avatar",email:a(this).val(),size:a(this).data("size")||0},success:function(b){b!=""&&a("#"+(a(this).data("avatar")||"user-avatar")).html(b)}})});a(".clearField").atom("clearField");a("form").submit(function(){a(".clearField",this).each(function(){a(this).atom("clearFieldCheck")});return true});a("form").each(function(){a("a.submit",this).click(function(){a(this).parents("form").submit()})});
a(".tabs").atom("tabs");a(".iSlider").atom("imageSlider");-1!==a.inArray("lightbox",c)&&(a("a").filter(function(){return!!this.href.match(/.+\.(jpg|jpeg|png|gif)$/i)}).each(function(){a(this).attr("data-group","group"+a(this).parents("div").index()).addClass("lightbox")}),a(".lightbox").atom("fancybox"),a("a").bind("href_updated",function(){this.href.match(/.+\.(jpg|jpeg|png|gif)$/i)&&a(this).atom("fancybox")}));-1!==a.inArray("generate_thumbs",c)&&a(document).bind("ajaxComplete doThisNow",function(){a("span.no-img.regen").each(function(){a(this).removeClass("regen");
a.ajax({url:atom_config.blog_url,type:"GET",context:this,data:{atom:"update_thumb",attachment_size:a(this).data("size"),post_id:a(this).data("post"),thumb_id:a(this).data("thumb")},beforeSend:function(){a(this).addClass("loading")},success:function(b){b!=""?a(this).replaceWith(b):a(this).removeClass("loading")}})})}).trigger("doThisNow");a(".page-navi.single a").click(function(b){b.preventDefault();var c=a(this).html();a.ajax({url:this.href,type:"POST",data:{atom:"content_only"},context:this,beforeSend:function(){a(this).addClass("loading").html("")},
success:function(b){a(b).find("#primary-content .posts .hentry").hide().appendTo(a(".posts")).fadeIn(333);(b=a(b).find("#primary-content .page-navi.single a").attr("href"))?a(this).attr("href",b).removeClass("loading").html(c):a(this).remove()}})});a('iframe[src*="youtube.com"]').each(function(){this.src=this.src+(this.src.indexOf("?")!==-1?"&wmode=Opaque":"?wmode=Opaque")});a('[type="application/x-shockwave-flash"]').append('<param name="wMode" value="transparent" />')}).trigger("atom_ready")});